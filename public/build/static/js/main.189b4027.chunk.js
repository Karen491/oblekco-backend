(this["webpackJsonpoblekco-frontend"]=this["webpackJsonpoblekco-frontend"]||[]).push([[0],{32:function(e,t,a){e.exports=a(62)},37:function(e,t,a){},39:function(e,t,a){},62:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),o=a.n(c),l=(a(37),a(28)),s=a.n(l),i=(a(38),a(29)),u=a.n(i),m=a(6),h=a(7),p=a(8),d=a(9),v=Object(n.createContext)(),k=(a(39),a(1)),f=a(12),g=a(30),E=a(5),b=a(11),N=a.n(b),w="https://oblekco-runningtracker.herokuapp.com/api";N.a.defaults.withCredentials=!0;var x=function(e){return N.a.post("".concat(w,"/login"),e)},y=function(e){return N.a.post("".concat(w,"/signup"),e)},O=function(){return N.a.post("".concat(w,"/logout"))},j=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:{}},e.handleChange=function(t){var a=e.state.user;a=Object(g.a)({},a,Object(f.a)({},t.target.name,t.target.value)),e.setState({user:a})},e.handleSubmit=function(t){t.preventDefault();var a=e.state.user,n="/"===e.props.pathname.pathname,r=e.context.setUser;(n?x:y)(a).then((function(e){if(n){var t=e.data.user;localStorage.setItem("user",JSON.stringify(t)),r(t)}})).catch((function(e){console.log(e)}))},e}return Object(h.a)(a,[{key:"render",value:function(){var e="/signup"===this.props.pathname.pathname;return r.a.createElement("div",{className:"uk-width-1-1 uk-flex uk-flex-middle uk-flex-right login","uk-height-viewport":"true"},r.a.createElement("div",{className:"uk-card uk-card-default uk-card-body uk-width-1-3@m uk-margin-xlarge-right authform-card"},r.a.createElement("h2",{className:"title-text uk-text-center"},"Running Tracker"),r.a.createElement("form",{onSubmit:this.handleSubmit},e?r.a.createElement("div",{className:"uk-margin"},r.a.createElement("div",{className:"uk-inline uk-width-1-1"},r.a.createElement("span",{className:"uk-form-icon","uk-icon":"icon: star"}),r.a.createElement("input",{onChange:this.handleChange,placeholder:"Name",id:"name",name:"name",className:"uk-input",type:"text"}))):null,e?r.a.createElement("div",{className:"uk-margin"},r.a.createElement("div",{className:"uk-inline uk-width-1-1"},r.a.createElement("span",{className:"uk-form-icon","uk-icon":"icon:  bolt"}),r.a.createElement("input",{onChange:this.handleChange,placeholder:"Last name",id:"last_name",name:"last_name",className:"uk-input",type:"text"}))):null,r.a.createElement("div",{className:"uk-margin"},r.a.createElement("div",{className:"uk-inline uk-width-1-1"},r.a.createElement("span",{className:"uk-form-icon","uk-icon":"icon: user"}),r.a.createElement("input",{onChange:this.handleChange,placeholder:"Email address",id:"email",name:"email",className:"uk-input",type:"text"}))),r.a.createElement("div",{className:"uk-margin"},r.a.createElement("div",{className:"uk-inline uk-width-1-1"},r.a.createElement("span",{className:"uk-form-icon","uk-icon":"icon: lock"}),r.a.createElement("input",{onChange:this.handleChange,placeholder:"Password",id:"password",name:"password",className:"uk-input",type:"password"}))),r.a.createElement("button",{className:"authform-button uk-width-1-1"},e?"Sign Up":"Log In"),r.a.createElement("hr",{className:"uk-divider-icon"}),e?r.a.createElement("h5",{className:"uk-text-center"},"Have an account? ",r.a.createElement(E.b,{to:"/"},"Log In")):r.a.createElement("h5",{className:"uk-text-center"},"Don't have an account? ",r.a.createElement(E.b,{to:"/signup"},"Sign Up")))))}}]),a}(n.Component);j.contextType=v,j.contextType=v;var C=j,S=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).logout=function(){var t=e.props.history;O().then((function(){localStorage.removeItem("user"),e.setState({user:{}}),t.push("/")}))},e}return Object(h.a)(a,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar","uk-navbar":"true"},r.a.createElement("div",{className:"uk-navbar-left"},r.a.createElement(E.b,{className:"nav-title-text",to:"/home"},"Running Tracker")),r.a.createElement("div",{className:"uk-navbar-right"},r.a.createElement(E.b,{className:"nav-text",to:"/home"},"+ Add New Race"),r.a.createElement("a",{className:"nav-text",href:"/",onClick:this.logout},"Log Out")))}}]),a}(n.Component),I=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.context.state,t=this.props.location;return r.a.createElement("div",null,e.user._id?r.a.createElement(S,null):r.a.createElement(C,{pathname:t}))}}]),a}(n.Component);I.contextType=v,I.contextType=v;var T=I,U=function(){return r.a.createElement(k.c,null,r.a.createElement(k.a,{exact:!0,path:"/",component:T}),r.a.createElement(k.a,{exact:!0,path:"/signup",component:T}))},A=function(e){Object(d.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:JSON.parse(localStorage.getItem("user"))||{}},e.setUser=function(t){e.setState({user:t})},e}return Object(h.a)(a,[{key:"render",value:function(){var e=this.state,t=this.setUser;return r.a.createElement(v.Provider,{value:{state:e,setUser:t}},r.a.createElement("div",{className:"home"},r.a.createElement(U,null)))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.use(u.a);var J=function(){return r.a.createElement(E.a,null,r.a.createElement(A,null))};o.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.189b4027.chunk.js.map